(this["webpackJsonpeco-rewards-admin"]=this["webpackJsonpeco-rewards-admin"]||[]).push([[0],{37:function(e,a,t){e.exports=t(71)},42:function(e,a,t){},43:function(e,a,t){},45:function(e,a,t){},51:function(e,a,t){},71:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(29),l=t.n(c),s=(t(42),t(43),t(8)),m=t(11),i=t(5),o=t.n(i),u=t(10),d=t(3),h=(t(45),function(e){var a=e.auth,t=Object(m.g)(),c=(Object(m.h)().state||{from:{pathname:"/"}}).from,l=Object(n.useState)(""),s=Object(d.a)(l,2),i=s[0],h=s[1],b=Object(n.useState)(""),p=Object(d.a)(b,2),E=p[0],f=p[1],v=Object(n.useState)(""),N=Object(d.a)(v,2),g=N[0],w=N[1],y=Object(n.useState)(!0),k=Object(d.a)(y,2),O=k[0],j=k[1],x=function(){var e=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,a.login(E,g);case 3:a.isAuthenticated?t.replace(c):h("Unable to login, please try again.");case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return a.isAuthenticated&&t.replace(c),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-xl-10 col-lg-12 col-md-9"},r.a.createElement("div",{className:"card o-hidden border-0 shadow-lg my-5"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6 d-none d-lg-block bg-login-image"}),r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("div",{className:"p-5"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{className:"h4 text-gray-900 mb-4"},"Login")),r.a.createElement("form",{className:"user"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control form-control-user",id:"exampleInputEmail","aria-describedby":"emailHelp",placeholder:"Enter Email Address...",onChange:function(e){return f(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control form-control-user",id:"exampleInputPassword",placeholder:"Password",onChange:function(e){return w(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"custom-control custom-checkbox small"},r.a.createElement("input",{type:"checkbox",checked:O,onChange:function(){return j(!O)},className:"custom-control-input",id:"customCheck"}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheck"},"Remember Me"))),r.a.createElement("button",{className:"btn btn-primary btn-user btn-block",onClick:x},"Login")),i&&r.a.createElement("hr",null),i))))))))}),b=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h1",{className:"h3 mb-2 text-gray-800"},"Dashboard"),r.a.createElement("p",{className:"mb-4"},"This will be the dashboard page with a bit of information."))},p=(t(51),function(){return r.a.createElement("ul",{className:"navbar-nav bg-gradient-primary sidebar sidebar-dark accordion",id:"accordionSidebar"},r.a.createElement("a",{className:"sidebar-brand d-flex align-items-center justify-content-center",href:"index.html"},r.a.createElement("div",{className:"sidebar-brand-icon rotate-n-15"},r.a.createElement("i",{className:"fas fa-leaf"})),r.a.createElement("div",{className:"sidebar-brand-text mx-3"},"Eco Rewards Hub Admin")),r.a.createElement("hr",{className:"sidebar-divider my-0"}),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{className:"nav-link",to:"/"},r.a.createElement("i",{className:"fas fa-fw fa-tachometer-alt"}),r.a.createElement("span",null,"Dashboard"))),r.a.createElement("hr",{className:"sidebar-divider"}),r.a.createElement("div",{className:"sidebar-heading"},"Manage"),r.a.createElement("li",{className:"nav-item active"},r.a.createElement(s.b,{className:"nav-link",to:"/schemes"},r.a.createElement("i",{className:"fas fa-fw fa-folder"}),r.a.createElement("span",null,"Schemes"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"charts.html"},r.a.createElement("i",{className:"fas fa-fw fa-chart-area"}),r.a.createElement("span",null,"Organisations"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"charts.html"},r.a.createElement("i",{className:"fas fa-fw fa-chart-area"}),r.a.createElement("span",null,"Groups"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"charts.html"},r.a.createElement("i",{className:"fas fa-fw fa-chart-area"}),r.a.createElement("span",null,"Members"))),r.a.createElement("hr",{className:"sidebar-divider"}),r.a.createElement("div",{className:"sidebar-heading"},"Reports"),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"tables.html"},r.a.createElement("i",{className:"fas fa-fw fa-table"}),r.a.createElement("span",null,"Journeys"))))}),E=function(e){var a=e.auth;return r.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow"},r.a.createElement("button",{id:"sidebarToggleTop",className:"btn btn-link d-md-none rounded-circle mr-3"},r.a.createElement("i",{className:"fa fa-bars"})),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item dropdown no-arrow"},r.a.createElement("a",{className:"dropdown-toggle",href:"/logout",onClick:function(e){e.preventDefault(),a.logout()},id:"userDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("span",{className:"mr-2 d-none d-lg-inline text-gray-600 small"},"Logout"),r.a.createElement("i",{className:"fas fa-user fa-sm fa-fw mr-2 text-gray-400"})))))},f=function(){return r.a.createElement("footer",{className:"sticky-footer bg-white"},r.a.createElement("div",{className:"container my-auto"},r.a.createElement("div",{className:"copyright text-center my-auto"},r.a.createElement("span",null,"Copyright \xa9 Eco Rewards"))))},v=t(31),N=function(e){var a=e.api,t=e.addScheme,c=Object(n.useState)(""),l=Object(d.a)(c,2),s=l[0],m=l[1],i=Object(n.useState)(""),h=Object(d.a)(i,2),b=h[0],p=h[1],E=function(){var e=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,a.post("/scheme",{name:s});case 4:r=e.sent,m(""),p("Scheme created."),t(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),p("Error while creating scheme.");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card shadow mb-4"},r.a.createElement("div",{className:"card-header py-3"},r.a.createElement("h6",{className:"m-0 font-weight-bold text-primary"},"Create New Scheme")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{className:"table-responsive col-2",onSubmit:E},r.a.createElement("p",null,b),r.a.createElement("table",{className:"table table-bordered",id:"dataTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"name",value:s,onChange:function(e){return m(e.target.value)},className:"col-12"}))))),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-user btn-block col-6",disabled:s.length<3},"Create"))))},g=t(32),w=function(e){e.api;var a=e.scheme;return r.a.createElement("tr",null,r.a.createElement("td",null,Object(g.toSchemeId)(a.id)),r.a.createElement("td",null,a.name),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-primary btn-user"},"Edit")))},y=function(e){var a=e.api,t=e.schemes;return r.a.createElement("div",{className:"card shadow mb-4"},r.a.createElement("div",{className:"card-header py-3"},r.a.createElement("h6",{className:"m-0 font-weight-bold text-primary"},"Edit Schemes")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered",id:"dataTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"col-1"},"ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",{className:"col-1"},"Edit"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(w,{key:e.id,api:a,scheme:e})})))))))};function k(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var O=function(e){var a=e.api,t=Object(n.useState)(),c=Object(d.a)(t,2),l=c[0],s=c[1],m=Object(n.useState)({}),i=Object(d.a)(m,2),h=i[0],b=i[1];Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get("/schemes");case 2:t=e.sent,s(t.data.data),b(t.data.links);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l||function(){e.apply(this,arguments)}()}),[a,l]);return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h1",{className:"h3 mb-2 text-gray-800"},"Schemes"),r.a.createElement("p",{className:"mb-4"},"Create and manage schemes."),r.a.createElement(N,{api:a,addScheme:function(e){l.push(e.data),s(l),b(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?k(Object(t),!0).forEach((function(a){Object(v.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},e.links,{},h))}}),r.a.createElement(y,{api:a,schemes:l||[]}))},j=function(e){var a=e.auth;return r.a.createElement("div",{id:"wrapper"},r.a.createElement(p,null),r.a.createElement("div",{id:"content-wrapper",className:"d-flex flex-column"},r.a.createElement("div",{id:"content"},r.a.createElement(E,{auth:a}),r.a.createElement(s.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/schemes"},r.a.createElement(O,{api:a.getAuthenticatedApi()})),r.a.createElement(m.b,{path:"/"},r.a.createElement(b,null))))),r.a.createElement(f,null)))},x=t(33),S=function(e){var a=e.children,t=e.auth,n=Object(x.a)(e,["children","auth"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(e){var n=e.location;return t.isAuthenticated?a:r.a.createElement(m.a,{to:{pathname:"/login",state:{from:n}}})}}))},C=t(34),A=t(35),D=t(36),P=t(14),R=t.n(P),L=function(){function e(a){Object(C.a)(this,e),this.api=a,this.cookie=void 0,this.setCookie=void 0,this.removeCookie=void 0,this.authenticatedApi=void 0;var t=Object(D.a)(["auth"]),n=Object(d.a)(t,3),r=n[0],c=n[1],l=n[2];this.cookie=r.auth,this.setCookie=c,this.removeCookie=l,this.authenticatedApi=R.a.create({baseURL:a.defaults.baseURL,headers:{authorization:"Basic "+(this.cookie&&this.cookie.token)}})}return Object(A.a)(e,[{key:"login",value:function(){var e=Object(u.a)(o.a.mark((function e(a,t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.post("/login",{username:a,password:t});case 3:n=e.sent,this.setCookie("auth",n.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(a,t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.removeCookie("auth")}},{key:"getAuthenticatedApi",value:function(){return this.authenticatedApi}},{key:"isAuthenticated",get:function(){return this.cookie&&void 0!==this.cookie.token}}]),e}();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(69),t(70);l.a.render(r.a.createElement((function(){var e=new L(R.a.create({baseURL:"https://api.ecorewards.co.uk"}));return r.a.createElement(s.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/login"},r.a.createElement(h,{auth:e})),r.a.createElement(S,{auth:e,path:"/"},r.a.createElement(j,{auth:e}))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.382a5861.chunk.js.map